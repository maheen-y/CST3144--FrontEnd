<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>After School Activities</title>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <style>
        body {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            background-color: lightgray;
        }

        header {
            text-align: center;
            font-style: italic;
        }

        h1 {
            text-align: center;
            font-weight: bold;
            color: red;
        }

        .lesson-template {
            background: white;
            color: red;
            text-align: left;
            margin: 25px auto;
            max-width: 300px;
            padding: 10px;
        }

        img {
            width: 100%;
            height: 145px;
            object-fit: cover;
        }

        p {
            color: red;
        }

        button {
            margin: 10px;
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div id="app">
        <header>
            <h1>{{ website }}</h1>
        </header>

        <button @click="displayCheckout">
            {{ lessonsInBasket }}
            <span class="fa-solid fa-cart-shopping"></span>
            Checkout
        </button>

        <main>
            <div v-if="showLessons">
                <div v-for="(lesson, index) in lessons" :key="index" class="lesson-template">
                    <img :src="lesson.image" :alt="lesson.subject">
                    <h3>{{ lesson.subject }}</h3>
                    <p>{{ lesson.location }}</p>
                    <p>Price: £{{ lesson.price }}</p>
                    <p v-if="lesson.space_available > 0">
                        Space available: {{ lesson.space_available }}
                    </p>
                    <p v-else>
                        You have reached the maximum number of lessons available
                    </p>
                    <input type="button" value="Add to basket" @click="addLessonToBasket(lesson)"
                        :disabled="lesson.space_available === 0">
                </div>
            </div>

            <div v-else>
                <h1>Checkout Page</h1>
                <div v-if="basket.length > 0">
                    <div v-for="(lesson, index) in basket" :key="index" class="lesson-template">
                        <img :src="lesson.image" :alt="lesson.subject">
                        <h3>{{ lesson.subject }}</h3>
                        <p>{{ lesson.location }}</p>
                        <p>Price: £{{ lesson.price }}</p>
                    </div>
                </div>
                <p v-else style="text-align:center; color:red;">
                    There are currently no items in your basket. Please select some lessons to proceed with the checkout
                </p>
            </div>
        </main>
    </div>

    <script>
        new Vue({
            el: "#app",
            data: {
                website: "After School Lessons & Activities",
                showLessons: true,
                lessons: [
                    {
                        subject: "English",
                        location: "Barnet",
                        price: 40,
                        space_available: 5,
                        image: "images/english.jpg"
                    },

                    {
                        subject: "Maths",
                        location: "Edgware",
                        price: 50,
                        space_available: 5,
                        image: "images/math.jpg"
                    },

                    {
                        subject: "Biology",
                        location: "Finchley",
                        price: 45,
                        space_available: 5,
                        image: "images/biology.jpg"
                    },

                    {
                        subject: "Chemistry",
                        location: "Harrow",
                        price: 55,
                        space_available: 5,
                        image: "images/chemistry.jpg"
                    },

                    {
                        subject: "Physics",
                        location: "Hendon",
                        price: 60,
                        space_available: 5,
                        image: "images/physics.jpg"
                    },

                    {
                        subject: "Geography",
                        location: "Westminster",
                        price: 70,
                        space_available: 5,
                        image: "images/geography.jpg"
                    },

                    {
                        subject: "Computing",
                        location: "Kilburn",
                        price: 65,
                        space_available: 5,
                        image: "images/computing.png"
                    },

                    {
                        subject: "French",
                        location: "Battersea",
                        price: 40,
                        space_available: 5,
                        image: "images/french.png"
                    },

                    {
                        subject: "Spanish",
                        location: "Mile End",
                        price: 45,
                        space_available: 5,
                        image: "images/spanish.jpg"
                    },

                    {
                        subject: "Physical Education",
                        location: "East Ham",
                        price: 35,
                        space_available: 5,
                        image: "images/PE.jpg"
                    }
                ],
                basket: []
            },
            computed: {
                lessonsInBasket() {
                    return this.basket.length || 0;
                }
            },
            methods: {
                displayCheckout() {
                    if (this.showLessons){
                        this.showLessons = false
                    } else {
                        this.showLessons = true
                    }
                },
                addLessonToBasket(lesson) {
                    if (lesson.space_available > 0) {
                        this.basket.push(lesson);
                        lesson.space_available--;
                    }
                }
            }
        });
    </script>
</body>

</html>